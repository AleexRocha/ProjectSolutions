create database TADES_BCD;

use TADES_BCD;
SET @@GLOBAL.TIME_ZONE = '+03:00';

create table tbl_filial (
    id_filial int not null primary key auto_increment,
    logradouro varchar(75) not null,
    numero int not null,
    cep varchar(10) not null,
    bairro varchar(50) not null,
    cidade varchar(50) not null,
    estado varchar(50) not null,
    telefone varchar(15)
);

create table tbl_setor(
    id_setor int not null primary key auto_increment,
    nome_setor varchar(50) not null
);

create table tbl_usuario(
    id_usuario int not null primary key auto_increment,
    nome varchar(75) not null,
    email varchar(50) not null,
    senha varchar(25) not null,
    fk_filial int not null,
    fk_setor int not null,
    foreign key (fk_filial) references tbl_filial(id_filial) on delete cascade,
    foreign key (fk_setor) references tbl_setor(id_setor) on delete cascade
);

create table tbl_produtos(
    id_produto int not null primary key auto_increment,
    nome varchar(50) not null,
    descricao varchar(100),
    tipo varchar(10) not null,
    fk_filial int not null,
    qtd_estoque int not null,
    valor_unidade double not null,
    foreign key (fk_filial) references tbl_filial(id_filial) on delete cascade
);

create table tbl_venda(
    id_venda int not null primary key auto_increment,
    id_produto int not null,
    id_usuario int not null,
    id_filial int not null,
    qtd_itens int not null,
    cpf_cliente varchar(15),
    data_venda datetime not null,
    foreign key(id_usuario) references tbl_usuario(id_usuario) on delete cascade,
    foreign key(id_filial) references tbl_filial(id_filial) on delete cascade
);